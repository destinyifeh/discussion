(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,s){},78:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),n=s(13),o=s.n(n),r=(s(31),s(32),s(33),s(34),s(56),s(57),s(4)),l=s(6),i=s(3),j=(s(58),s(2)),m=s(5),u=s.n(m),d=s(0);var b=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),o=Object(j.a)(n,2),l=o[0],m=o[1],b=Object(c.useState)([]),h=Object(j.a)(b,2),x=h[0],f=h[1],g=Object(c.useState)(!1),O=Object(j.a)(g,2),p=O[0],N=O[1];return Object(c.useEffect)((function(){u.a.get("/api/users").then((function(e){console.log(e.data);var t=e.data;f(t)})).catch((function(e){console.log(e.response)})),i.b.info("login to have full access")}),[]),document.title="Discussion | Login",Object(d.jsxs)("div",{className:"container-fluid login",children:[Object(d.jsx)("h5",{className:"pt-4 text-center text-white",children:"Welcome to Discussion"}),Object(d.jsx)("p",{className:"text-center text-white",children:" Hi! Please login to have full access "}),p?Object(d.jsx)("p",{className:"text-center text-white",children:"Please wait..."}):" ",Object(d.jsxs)("form",{className:"login-form col-lg-6 mx-lg-auto mt-5",onSubmit:function(e){e.preventDefault(),N(!0);var t=x.map((function(e){return"true"!==e.isVerified}));console.log(t);var c=x.filter((function(e){return e.username.toLowerCase().includes(s)||e.username.toUpperCase().includes(s)}));if(console.log(c),!s||!l){return console.log("You can not submit empty form"),i.b.error("You can not submit empty form"),!1}if(!t){return console.log("This email is not verified"),i.b.error("This email is not verified"),!1}if(c){console.log("User found");var n={username:s,password:l};return console.log(n),u.a.post("/api/user/login",n).then((function(e){if("Incorrect password"===e.data){N(!1),m(""),console.log("Incorrect password"),i.b.error("Incorrect password")}else console.log(e.data),a(""),m(""),N(!1),i.b.success("logged in"),localStorage.setItem("online",JSON.stringify(e.data)),localStorage.setItem("userId",JSON.stringify(e.data._id)),setTimeout((function(){window.location.href="/user/security-check"}),2e3)})).catch((function(e){console.log(e.response),i.b.error("Oops! An error occurred, try again"),N(!1)})),!0}return console.log("No user"),i.b.error("No user found"),!1},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"text-white",children:"Username"}),Object(d.jsx)("input",{className:"form-control login-control",type:"text",placeholder:"enter username",value:s,onChange:function(e){var t=e.target.value;a(t)}})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Password"}),Object(d.jsx)("input",{className:"form-control login-control",type:"password",placeholder:"enter password",value:l,onChange:function(e){var t=e.target.value;m(t)}})]}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn login-btn",children:"Login"})})]}),Object(d.jsxs)("div",{className:"d-flex justify-content-between my-2 col-lg-6 mx-lg-auto",children:[Object(d.jsx)(r.b,{className:" text-white login-link",to:"/user/register",children:"Signup"}),Object(d.jsx)(r.b,{className:" text-white login-link ",to:"/user/forgot-password",children:"Forgot password?"})]})]})};var h=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),o=Object(j.a)(n,2),l=o[0],m=o[1],b=Object(c.useState)(""),h=Object(j.a)(b,2),x=h[0],f=h[1],g=Object(c.useState)(""),O=Object(j.a)(g,2),p=O[0],N=O[1],v=Object(c.useState)(""),w=Object(j.a)(v,2),y=w[0],S=w[1],k=Object(c.useState)([]),P=Object(j.a)(k,2),C=P[0],D=P[1],A=Object(c.useState)(!1),T=Object(j.a)(A,2),Y=T[0],I=T[1],U=function(e){if(e.target.files[0].length>1){return i.b.error("Only 1 images can be uploaded at a time"),e.target.value=null,console.log("Only 1 images can be uploaded at a time"),!1}return!0},M=function(e){var t=e.target.files[0],s="";return["image/png","image/jpg","image/jpeg"].every((function(e){return t.type!==e}))&&(s+=t.type+" is not a supported format\n",i.b.error(t.type+" is not a supported format\n")),""===s||(e.target.value=null,console.log(s),!1)},E=function(e){var t=e.target.files[0],s="";return t.size>1e6&&(s+=t.type+"is too large, please pick a smaller file\n",i.b.error("Image is too large, please pick a smaller file")),""===s||(e.target.value=null,console.log(s),!1)};return Object(c.useEffect)((function(){var e=localStorage.getItem("currentUser");console.log(e),u.a.get("/api/users").then((function(e){console.log(e.data);var t=e.data;D(t)})).catch((function(e){console.log(e.response)}))}),[]),document.title="Discussion | Register",Object(d.jsxs)("div",{className:"container-fluid login",children:[Object(d.jsx)("h5",{className:"pt-4 text-center text-white",children:"Welcome to Discussion"}),Object(d.jsx)("p",{className:"text-center text-white",children:" Hi! Please register to have full access "}),Y?Object(d.jsx)("p",{className:"text-center text-white",children:"Please wait..."}):" ",Object(d.jsxs)("form",{className:"login-form col-lg-6 mx-lg-auto mt-5",onSubmit:function(e){e.preventDefault();var t=new FormData;I(!0),t.append("photo",x),console.log(x),t.append("email",s),t.append("username",l),t.append("password",p),console.log(s);var c=C.map((function(e){return e.username})),n=C.map((function(e){return e.email}));if(c.includes(l)){console.log(c);return console.log("Username exist"),i.b.error("Username exist"),!1}if(n.includes(s)){console.log(n);return console.log("Email exist"),i.b.error("Email exist"),!1}if(!s||!l||!p||!x){return console.log("You can not submit empty form"),i.b.error("You can not submit empty form"),!1}if(p!==y){return console.log("Password do not match"),i.b.error("Password do not match"),N(""),S(""),!1}if(p.length<4){return console.log("Password must be atleast 4 unique characters"),i.b.error("Password must be atleast 4 unique characters"),N(""),S(""),!1}return u.a.post("/api/user/register",t).then((function(e){return console.log(e.data),"user exist"===e.data?(m(""),i.b.error("Username already exist"),!1):(N(""),S(""),m(""),a(""),f(""),I(!1),i.b.success("Registered, verification code sent to your email"),setTimeout((function(){window.location.href="/user/verify-email"}),2e3),!0)})).catch((function(e){console.log(e.response),i.b.error("Oops! An error occurred, try again"),I(!1)})),!0},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"text-white",children:"Email"}),Object(d.jsx)("input",{className:"form-control login-control",type:"email",placeholder:"enter email",value:s,onChange:function(e){var t=e.target.value;a(t)}})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Username"}),Object(d.jsx)("input",{className:"form-control login-control",type:"text",placeholder:"username",value:l,onChange:function(e){var t=e.target.value;m(t)}})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Photo"}),Object(d.jsx)("input",{className:"form-control login-control",type:"file",placeholder:"photo",defaultValue:x,onChange:function(e){if(U(e)&&E(e)&&M(e)){var t=e.target.files[0];f(t),console.log(t)}}})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Password"}),Object(d.jsx)("input",{className:"form-control login-control",type:"password",placeholder:"enter password",value:p,onChange:function(e){var t=e.target.value;N(t)}})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Re-enter password"}),Object(d.jsx)("input",{className:"form-control login-control",type:"password",placeholder:"confirm password",value:y,onChange:function(e){var t=e.target.value;S(t)}})]}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn login-btn",children:"Signup"})})]}),Object(d.jsx)("h5",{className:" text-white text-center mt-3",children:"Already a registered user?"}),Object(d.jsx)(r.b,{className:"d-flex justify-content-center text-white login-link",to:"/",children:"Login"})]})};var x=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)([]),o=Object(j.a)(n,2),l=o[0],m=o[1],b=Object(c.useState)(!1),h=Object(j.a)(b,2),x=h[0],f=h[1];return Object(c.useEffect)((function(){u.a.get("/api/users").then((function(e){console.log(e.data);var t=e.data;m(t)})).catch((function(e){console.log(e.response)}))}),[m]),Object(d.jsxs)("div",{className:"container-fluid login",children:[Object(d.jsx)("h5",{className:"pt-4 text-center text-white",children:"Welcome to Discussion"}),Object(d.jsx)("p",{className:"text-center text-white",children:" Hi! Please enter your acccount email"}),Object(d.jsx)("p",{className:"text-center text-white",children:x?"Please wait, sending reset code....":" "}),Object(d.jsxs)("form",{className:"login-form col-lg-6 mx-lg-auto mt-5",onSubmit:function(e){e.preventDefault();var t=l.map((function(e){return e.email}));if(!s){return console.log("You can not submit empty form"),i.b.error("You can not submit empty form"),!1}if(t.includes(s)){f(!0);var c={email:s};u.a.post("/api/forgot/password",c).then((function(e){console.log(e.data),i.b.success("Password reset code sent to your email"),a(""),f(!1),setTimeout((function(){window.location.href="/user/reset-code"}),2e3)})).catch((function(e){console.log(e.response),a(""),f(!1),i.b.error("Oops! An error occur, try again")}))}},children:[Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control login-control",type:"email",placeholder:"enter email",value:s,onChange:function(e){var t=e.target.value;a(t)}})}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn login-btn",children:"Send reset code"})})]}),Object(d.jsxs)("div",{className:"d-flex justify-content-between my-2 col-lg-6 mx-lg-auto",children:[Object(d.jsx)(r.b,{className:" text-white login-link",to:"/user/register",children:"Signup"}),Object(d.jsx)(r.b,{className:" text-white login-link ",to:"/user/login",children:"Login"})]})]})};var f=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)([]),o=Object(j.a)(n,2),l=o[0],m=o[1];return Object(c.useEffect)((function(){u.a.get("/api/users").then((function(e){console.log(e.data);var t=e.data;m(t)})).catch((function(e){console.log(e.response)}))}),[]),Object(d.jsxs)("div",{className:"container-fluid login",children:[Object(d.jsx)("h5",{className:"pt-4 text-center text-white",children:"Welcome to Discussion"}),Object(d.jsx)("p",{className:"text-center text-white",children:" Hi! Please enter verification code sent to your email"}),Object(d.jsxs)("form",{className:"login-form col-lg-6 mx-lg-auto mt-5",onSubmit:function(e){e.preventDefault();var t=l.map((function(e){return e.emailToken}));if(!s){return console.log("You can not submit empty form"),i.b.error("You can not submit empty form"),!1}if(6!==s.length){return console.log("Verification code must be six digit number"),i.b.error("Verification code must be six digit number"),!1}if(t.includes(s)){console.log("Email token found");var c={emailToken:s};return u.a.post("/api/email-verification",c).then((function(e){console.log(e.data),a(""),i.b.success("verified"),setTimeout((function(){window.location.href="/user/login"}),2e3)})).catch((function(e){console.log(e.response),i.b.error("Oops! An error occurred, try again")})),!0}return console.log("No verification code found"),a(""),i.b.error("Verification code not found"),!1},children:[Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control login-control",type:"text",placeholder:"enter verification code",value:s,onChange:function(e){var t=e.target.value;a(t)}})}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn login-btn",children:"Verify"})})]}),Object(d.jsxs)("div",{className:"d-flex justify-content-between my-2 col-lg-6 mx-lg-auto",children:[Object(d.jsx)(r.b,{className:" text-white login-link",to:"/user/register",children:"Signup"}),Object(d.jsx)(r.b,{className:" text-white login-link ",to:"/user/login",children:"Login"})]})]})};var g=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)([]),o=Object(j.a)(n,2),l=o[0],m=o[1];return Object(c.useEffect)((function(){u.a.get("/api/users").then((function(e){console.log(e.data);var t=e.data;m(t)})).catch((function(e){console.log(e.response)}))}),[]),Object(d.jsxs)("div",{className:"container-fluid login",children:[Object(d.jsx)("h5",{className:"pt-4 text-center text-white",children:"Welcome to Discussion"}),Object(d.jsx)("p",{className:"text-center text-white",children:" Hi! Please enter password reset code sent to your email"}),Object(d.jsxs)("form",{className:"login-form col-lg-6 mx-lg-auto mt-5",onSubmit:function(e){e.preventDefault();var t=l.map((function(e){return e.resetPasswordToken}));if(!s){return console.log("You can not submit empty form"),i.b.error("You can not submit empty form"),!1}if(6!==s.length){return console.log("Password reset code must be six digit number"),i.b.error("Password reset code must be six digit number"),!1}if(t.includes(s)){console.log("resetPasswordToken found");var c={resetPasswordToken:s};return u.a.post("/api/reset-password-code",c).then((function(e){if(console.log(e.data),"Password reset token is invalid or has expired"===e.data)i.b.error("Password reset token is invalid or has expired"),a("");else{a(""),i.b.success("Valid");var t=e.data._id;console.log(t),window.location.href="/user/reset-password/"+t}})).catch((function(e){console.log(e.response),i.b.error("Oops! An error occurred, try again"),a("")})),!0}return console.log("No password reset code found"),a(""),i.b.error("password reset code not found"),!1},children:[Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control login-control",type:"text",placeholder:"enter password reset code",value:s,onChange:function(e){var t=e.target.value;a(t)}})}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn login-btn",children:"Confirm"})})]}),Object(d.jsxs)("div",{className:"d-flex justify-content-between my-2 col-lg-6 mx-lg-auto",children:[Object(d.jsx)(r.b,{className:" text-white login-link",to:"/user/forgot-password",children:"Go back"}),Object(d.jsx)(r.b,{className:" text-white login-link ",to:"/user/login",children:"Login"})]})]})};var O=function(e){var t=Object(c.useState)(""),s=Object(j.a)(t,2),a=s[0],n=s[1],o=Object(c.useState)(""),m=Object(j.a)(o,2),b=m[0],h=m[1],x=Object(l.g)().id;return Object(c.useEffect)((function(){console.log(x)}),[x]),Object(d.jsxs)("div",{className:"container-fluid login",children:[Object(d.jsx)("h5",{className:"pt-4 text-center text-white",children:"Welcome to Discussion"}),Object(d.jsx)("p",{className:"text-center text-white",children:" Hi! Please enter your new password "}),Object(d.jsxs)("form",{className:"login-form col-lg-6 mx-lg-auto mt-5",onSubmit:function(e){if(e.preventDefault(),a!==b){return console.log("Password do not match"),i.b.error("Password do not match"),n(""),h(""),!1}if(a.length<4){return console.log("Password must be atleast 4 unique characters"),i.b.error("Password must be atleast 4 unique characters"),n(""),h(""),!1}var t={password:a};return u.a.post("/api/reset-password/"+x,t).then((function(e){console.log(e.data),n(""),h(""),i.b.success("Password changed successfully"),setTimeout((function(){window.location.href="/"}),2e3)})).catch((function(e){console.log(e.response),i.b.error("Oops! An error occur, try again")})),!0},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"text-white",children:"New Password"}),Object(d.jsx)("input",{className:"form-control login-control",type:"password",placeholder:"enter password",value:a,onChange:function(e){var t=e.target.value;n(t)}})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Re-enter Password"}),Object(d.jsx)("input",{className:"form-control login-control",type:"password",placeholder:"re-enter password",value:b,onChange:function(e){var t=e.target.value;h(t)}})]}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn login-btn",children:"Reset"})})]}),Object(d.jsxs)("div",{className:"d-flex justify-content-between my-2 col-lg-6 mx-lg-auto",children:[Object(d.jsx)(r.b,{className:" text-white login-link",to:"/user/register",children:"Signup"}),Object(d.jsx)(r.b,{className:" text-white login-link ",to:"/user/login",children:"Login"})]})]})};var p=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),o=Object(j.a)(n,2),m=o[0],b=o[1],h=Object(c.useState)(""),x=Object(j.a)(h,2),f=x[0],g=x[1],O=Object(l.g)().username;Object(c.useEffect)((function(){u.a.get("/api/user/"+O).then((function(e){console.log(e.data),b(e.data.photo),a(e.data.email)})).catch((function(e){console.log(e.response)})),u.a.get("/api/online-users").then((function(e){console.log(e.data),g(e.data)})).catch((function(e){return console.log(e.response)}))}),[O]);var p=function(e){if(e.target.files[0].length>1){return i.b.error("Only 1 images can be uploaded at a time"),e.target.value=null,console.log("Only 1 images can be uploaded at a time"),!1}return!0},N=function(e){var t=e.target.files[0],s="";return["image/png","image/jpg","image/jpeg"].every((function(e){return t.type!==e}))&&(s+=t.type+" is not a supported format\n",i.b.error(t.type+" is not a supported format\n")),""===s||(e.target.value=null,console.log(s),!1)},v=function(e){var t=e.target.files[0],s="";return t.size>1e6&&(s+=t.type+"is too large, please pick a smaller file\n",i.b.error("Image is too large, please pick a smaller file")),""===s||(e.target.value=null,console.log(s),!1)};return Object(d.jsxs)("div",{className:"container-fluid login",children:[Object(d.jsx)("h5",{className:"pt-4 text-center text-white",children:"Welcome to Discussion"}),Object(d.jsxs)("p",{className:"text-center text-white",children:[" Hi! ",O," Update your account record"]}),Object(d.jsxs)("form",{className:"login-form col-lg-6 mx-lg-auto mt-5",onSubmit:function(e){e.preventDefault();var t=new FormData;if(t.append("photo",m),console.log(m),t.append("email",s),console.log(s),s)return u.a.put("/api/update/user/"+O,t).then((function(e){console.log(e.data),a(e.data.email),b(e.data.photo),!0===e.data.isVerified?(i.b.success("Success, record updated"),setTimeout((function(){!function(e){console.log(e),u.a.delete("/api/delete/online-user/"+e).then((function(t){console.log(t.data);var s=f.filter((function(t){return t.username!==e}));console.log(s),g(s),console.log(f)})).catch((function(e){return console.log(e.response)})),localStorage.removeItem("online")}(),window.location.href="/user/login"}),2e3)):(i.b.success("Success, verification code sent to your email"),setTimeout((function(){window.location.href="/user/verify-email"}),2e3))})).catch((function(e){console.log(e.response),i.b.error("Oops! An error occur, try again")})),!0;return console.log("You can not submit empty form"),i.b.error("You can not submit empty form"),!1},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"text-white",children:"Email"}),Object(d.jsx)("input",{className:"form-control login-control",type:"email",placeholder:"enter email",value:s,onChange:function(e){a(e.target.value)}})]}),Object(d.jsx)("img",{className:"img-thumbnail my-3 d-block mx-auto",style:{width:"150px",height:"150px"},src:m,alt:" "}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Upload New Photo"}),Object(d.jsx)("input",{className:"form-control login-control",type:"file",placeholder:"",defaultValue:m,onChange:function(e){if(p(e)&&v(e)&&N(e)){var t=e.target.files[0];b(t),console.log(t)}}})]}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn login-btn",children:"Update Record"})})]}),Object(d.jsxs)("div",{className:"d-flex justify-content-between my-2 col-lg-6 mx-lg-auto",children:[Object(d.jsx)(r.b,{className:" text-white login-link",to:"/",children:"Home"}),Object(d.jsx)(r.b,{className:" text-white login-link ",to:"/user/profile",children:"Profile"})]})]})};var N=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(!0),o=Object(j.a)(n,2),l=o[0],m=o[1],b=Object(c.useState)(""),h=Object(j.a)(b,2),x=h[0],f=h[1],g=Object(c.useState)(""),O=Object(j.a)(g,2),p=O[0],N=O[1],v=function(){setTimeout((function(){m(!0),a(!1)}),1e3)};Object(c.useEffect)((function(){u.a.get("/api/online-users").then((function(e){console.log(e.data),f(e.data)})).catch((function(e){return console.log(e.response)}))}),[]);var w=function(e){console.log(e);var t=e;u.a.delete("/api/delete/online-user/"+t).then((function(e){console.log(e.data);var s=x.filter((function(e){return e.loginUsername!==t}));console.log(s),f(s),console.log(x)})).catch((function(e){return console.log(e.response)})),localStorage.removeItem("online"),localStorage.removeItem("userId"),i.b.success("logged out"),setTimeout((function(){window.location.href="/user/login"}),1e3)},y=localStorage.getItem("online"),S=JSON.parse(y);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"container-fluid navbar d-flex justify-content-between sticky-top",children:[Object(d.jsx)(r.b,{className:"logo",to:"/",children:"Discussion "}),Object(d.jsxs)("ul",{className:"nav d-none d-lg-flex",children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(r.b,{className:"nav-link",to:"/",children:"Home"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(r.b,{className:"nav-link",to:"/user/edit/".concat(S?S.username:""),children:"Profile"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(r.b,{className:"nav-link",to:"/feature/new",children:"Create Post"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(r.b,{className:"nav-link",to:"/user/features",children:"My Posts"})}),Object(d.jsx)("li",{className:"nav-item",children:S?Object(d.jsx)(r.b,{className:"nav-link",to:"#",onClick:function(){w(S.username)},children:"Logout"}):Object(d.jsx)(r.b,{className:"nav-link",to:"/user/login",children:"Login"})})]}),l?Object(d.jsx)("i",{className:"fa fa-reorder text-white d-lg-none",onClick:function(){a(!0),m(!1)}}):"",s?Object(d.jsx)("i",{className:"fa fa-times text-white d-lg-none",onClick:function(){m(!0),a(!1)}}):""]}),s?Object(d.jsx)("form",{className:"my-2",onSubmit:function(e){e.preventDefault(),window.location.href="/search/query=".concat(p)},children:Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("input",{type:"search",className:"form-control sm-search shadow-none",placeholder:"Search...",value:p,onChange:function(e){N(e.target.value),console.log(e)}}),Object(d.jsx)("div",{className:"input-group-append",children:Object(d.jsx)("button",{className:"btn search-btn",onClick:function(){setTimeout((function(){m(!0),a(!1)}),1e3)},children:Object(d.jsx)("i",{className:"fa fa-search"})})})]})}):"",s?Object(d.jsxs)("ul",{className:"nav d-lg-none d-block float-start mobile-nav",children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(r.b,{className:"nav-link",to:"/",onClick:v,children:"Home"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(r.b,{className:"nav-link",to:"/user/edit/".concat(S.username),onClick:v,children:"Profile"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(r.b,{className:"nav-link",to:"/feature/new",onClick:v,children:"Create Post"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(r.b,{className:"nav-link",to:"/user/features",onClick:v,children:"My Posts"})}),Object(d.jsx)("li",{className:"nav-item",children:S?Object(d.jsx)(r.b,{className:"nav-link",to:"#",onClick:function(){w(S.username)},children:"Logout"}):Object(d.jsx)(r.b,{className:"nav-link",to:"/user/login",children:"Login"})})]}):""]})};var v=function(){return Object(d.jsxs)("div",{className:"container-fluid footer text-center mt-5",children:[Object(d.jsx)("p",{className:"copy text-center mt-4",children:"Discussion \xa9 2021. All rights reserved "}),Object(d.jsxs)("span",{className:"footer-span",children:[Object(d.jsx)("h6",{className:"span1 text-white",children:"Disclaimer:"}),Object(d.jsx)("p",{className:"text-center text-white",children:" Every member is responsible for what he or she post here."})]})]})},w=s(7),y=s.n(w),S=s(10),k=s.n(S);y.a.extend(k.a);var P=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),o=Object(j.a)(n,2),m=o[0],b=o[1],h=Object(c.useState)(""),x=Object(j.a)(h,2),f=x[0],g=x[1],O=Object(c.useState)(""),p=Object(j.a)(O,2),w=p[0],S=p[1],k=Object(c.useState)(""),P=Object(j.a)(k,2),C=P[0],D=P[1],A=Object(c.useState)(!0),T=Object(j.a)(A,2),Y=T[0],I=T[1],U=Object(c.useState)(!1),M=Object(j.a)(U,2),E=M[0],F=M[1],L=Object(c.useState)(""),_=Object(j.a)(L,2),H=_[0],J=_[1],B=Object(l.g)().username,R=localStorage.getItem("online"),V=JSON.parse(R);Object(c.useEffect)((function(){g(V.email),J(V.username),u.a.get("/api/user/"+B).then((function(e){console.log(e.data),a(e.data),b(e.data.email)})).catch((function(e){console.log(e.response)})),u.a.get("/api/features/search").then((function(e){console.log(e.data),D(e.data.filter((function(e){return e.username===B}))),I(!1)})).catch((function(e){console.log(e.response),I(!1)}))}),[B,V.email,Y,V.username]);var q=function(e){e.preventDefault(),console.log(e)},W=Array.from(C);return console.log(W),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsx)("div",{className:"container profile-content my-4",children:Object(d.jsxs)("div",{className:"row",children:[Y?Object(d.jsx)("h5",{className:"text-center",children:"Loading...."}):" ",Object(d.jsxs)("div",{className:"col-md-4 my-2",children:[Object(d.jsx)("h5",{className:"text-center",children:"Info"}),Object(d.jsx)("div",{className:"container members",children:Object(d.jsxs)("div",{className:"text-center infos",children:[Object(d.jsx)("img",{className:"images  img-thumbnail",src:s.photo,alt:" "}),Object(d.jsxs)("p",{children:[" Username: ",s.username," "]}),Object(d.jsxs)("p",{children:["Status: ",s.isAdmin?"Admin":"Member"]}),Object(d.jsxs)("p",{className:"",children:["Registered date: ",y()(s.createdAt).format("DD/MM/YYYY")]})]})})]}),Object(d.jsxs)("div",{className:"col-md-4",children:[Object(d.jsxs)("h5",{className:"text-center userText my-2",children:[s.username," Posts "]}),W.length>0?W.map((function(e){return Object(d.jsxs)("div",{className:"card mb-3",children:[Object(d.jsxs)("div",{className:"p-2",children:[Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"card-name",to:"/user/".concat(e.username),children:[Object(d.jsx)("img",{className:"image ",src:e.photo,alt:""})," ",e.username]})," ",Object(d.jsxs)("span",{className:"status",children:[" . ",V&&V.admin?"Admin":"Member"]})]}),Object(d.jsxs)("strong",{children:[" ",Object(d.jsx)("i",{className:"fa fa-clock-o"})," ",y()(e.createdAt).fromNow()]}),Object(d.jsx)(r.b,{className:"",to:"/feature/".concat(e.slug),children:Object(d.jsxs)("h5",{className:"mt-1",children:[e.title," "]})}),Object(d.jsxs)("p",{className:"card-text",children:[e.description.substring(0,60),"..."]})]}),Object(d.jsx)("img",{className:"img-card-top",src:e.image,alt:""}),Object(d.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(d.jsxs)("div",{className:"d-flex justify-content-even p-2",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-eye"})," ",e.viewedBy.length," views "]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-comment"})," ",e.comments.length," comments "]})]}),Object(d.jsx)("div",{className:"d-flex justify-content-even p-2",children:Object(d.jsxs)(r.b,{className:"",to:"/report/feature/".concat(e.title),children:["report ",Object(d.jsx)("i",{className:"fa fa-angle-double-right"})]})})]}),Object(d.jsx)("div",{className:"card-footer",children:Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"add-comment",to:"/feature/".concat(e.slug),children:[Object(d.jsx)("img",{className:"image ",src:V?V.photo:"",alt:""})," Add a comment"]})]})})]},e._id)})):Object(d.jsx)("p",{className:"text-center",children:"No post yet"})]}),V.username===s.username?"":Object(d.jsxs)("div",{className:"col-md-4",children:[E?Object(d.jsx)("p",{className:"text-center",children:"Please wait.... message is sending"}):"",Object(d.jsxs)("h5",{className:"",children:["Contact ",Object(d.jsxs)("span",{className:"",children:["( ",s.username," )"]})]}),Object(d.jsxs)("form",{className:"",onSubmit:function(e){e.preventDefault(),F(!0);var t={sender_email:f,sender_name:H,receiver:m,messageBody:w};if(console.log(t),w)return u.a.post("/api/user/message",t).then((function(e){console.log(e.data),S(""),F(!1),i.b.success("Message sent")})).catch((function(e){console.log(e.response),F(!1),i.b.error("Message not sent, try again")})),!0;return console.log("Please write something before submitting"),i.b.error("Please write something before submitting"),!1},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"profile-text",children:"Your email"}),Object(d.jsx)("input",{className:"form-control",type:"email",value:f,onMouseDown:q,onChange:function(e){var t=e.target.value;g(t)}})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"profile-text",children:"Message"}),Object(d.jsx)("textarea",{className:"form-control",placeholder:"message....",rows:"5",value:w,onChange:function(e){var t=e.target.value;S(t)}})]}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn profile-btn",type:"submit",children:"Send"})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control receiver",type:"email",value:m,onMouseDown:q,onChange:function(e){var t=e.target.value;b(t)}})})]})]})]})}),Object(d.jsx)(v,{})]})};y.a.extend(k.a);var C=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),o=Object(j.a)(n,2),l=o[0],i=o[1],m=Object(c.useState)(""),b=Object(j.a)(m,2),h=b[0],x=b[1],f=Object(c.useState)(!1),g=Object(j.a)(f,2),O=g[0],p=g[1],w=Object(c.useState)(""),S=Object(j.a)(w,2),k=S[0],P=S[1],C=Object(c.useState)(""),D=Object(j.a)(C,2),A=D[0],T=D[1],Y=Object(c.useState)(""),I=Object(j.a)(Y,2),U=I[0],M=I[1],E=localStorage.getItem("online"),F=JSON.parse(E);Object(c.useEffect)((function(){u.a.get("/api/online-users").then((function(e){console.log(e.data),console.log(e.data.loginUsername);var t=e.data.filter((function(e){return e.loginUsername}));M(t),console.log(t),a(e.data)})).catch((function(e){return console.log(e.response)})),u.a.get("/api/features").then((function(e){console.log(e.data),x(e.data),p(!0)})).catch((function(e){console.log(e.response)})),u.a.get("/api/features/recent").then((function(e){console.log(e.data),P(e.data)})).catch((function(e){console.log(e.response)})),u.a.get("/api/verified/users").then((function(e){console.log(e.data),T(e.data)})).catch((function(e){console.log(e.response)}))}),[null===F||void 0===F?void 0:F.username]);var L=Array.from(s);console.log(L.length);var _=Array.from(h),H=Array.from(k),J=Array.from(A),B=Array.from(U).map((function(e){return e.loginUsername}));return document.title="Discussion | Home",Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsxs)("div",{className:"container-fluid",children:[Object(d.jsx)("h4",{className:"text-center mt-4",children:"Welcome To Discussion"}),Object(d.jsx)("p",{className:"text-center",children:"The people's forum"}),Object(d.jsxs)("p",{className:"text-center",children:["Registered users: ",J.length," |"," ",Object(d.jsxs)("span",{className:"text-success",children:["Members online: ",L.length]})]}),Object(d.jsxs)("p",{className:"text-center",children:["Date: ",y()().format("DD/MM/YYYY"),","," ",Object(d.jsxs)("span",{className:"",children:["Time: ",y()().format("h:ma")]})]}),Object(d.jsx)("div",{className:"container profile my-4",children:Object(d.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(d.jsx)("div",{className:"",children:Object(d.jsx)("img",{className:"image",src:F?F.photo:"",alt:""})}),Object(d.jsx)("p",{className:"para",children:"Tell others what is happening"}),Object(d.jsx)("form",{className:"my-2 home-form d-none d-lg-inline",onSubmit:function(e){e.preventDefault(),console.log(e),window.location.href="/search/query=".concat(l)},children:Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("input",{type:"search",className:"form-control lg-search shadow-none",placeholder:"Search...",value:l,onChange:function(e){i(e.target.value)}}),Object(d.jsx)("div",{className:"input-group-append",children:Object(d.jsx)("button",{className:"btn search-btn",children:Object(d.jsx)("i",{className:"fa fa-search"})})})]})})]})}),Object(d.jsxs)("div",{className:"container my-4",children:[O?"":Object(d.jsx)("h5",{className:"loader text-center",children:"Loading ... "}),Object(d.jsxs)("div",{className:"row",children:[Object(d.jsxs)("div",{className:"col-md-4",children:[Object(d.jsx)("h5",{className:"text-center",children:"Hot Gists"}),_.map((function(e){return Object(d.jsxs)("div",{className:"card mb-3",children:[Object(d.jsxs)("div",{className:"p-2",children:[Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"card-name",to:"/user/".concat(e.username),children:[Object(d.jsx)("img",{className:"image ",src:e.photo,alt:""})," ",e.username]})," ",Object(d.jsxs)("span",{className:"status",children:[B.includes(e.username)?Object(d.jsx)("i",{className:"fa fa-circle text-success circle"}):Object(d.jsx)("i",{className:"fa fa-circle circle2"})," ",F&&F.admin?"Admin":"Member"]})]}),Object(d.jsx)("i",{className:"fa fa-clock-o text-dark"})," ",y()(e.createdAt).fromNow(),Object(d.jsx)(r.b,{className:"",to:"/feature/".concat(e.slug),children:Object(d.jsxs)("h5",{className:"mt-1 feature_title",children:[e.title," "]})}),Object(d.jsxs)("p",{className:"card-text",children:[e.description.substring(0,60),"..."]})]}),Object(d.jsx)("img",{className:"img-card-top",src:e.image,alt:""}),Object(d.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(d.jsxs)("div",{className:"d-flex justify-content-even p-2",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-eye"})," ",e.viewedBy.length," views"," "]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-comment"})," ",e.comments.length," comments"," "]})]}),Object(d.jsx)("div",{className:"d-flex justify-content-even p-2",children:Object(d.jsxs)(r.b,{className:"",to:"/report/feature/".concat(e.title),children:["report ",Object(d.jsx)("i",{className:"fa fa-angle-double-right"})]})})]}),Object(d.jsx)("div",{className:"card-footer",children:Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"add-comment",to:"/feature/".concat(e.slug),children:[Object(d.jsx)("img",{className:"image ",src:F?F.photo:"",alt:""})," ","Add a comment"]})]})})]},e._id)}))]}),Object(d.jsxs)("div",{className:"col-md-4",children:[Object(d.jsx)("h5",{className:"text-center",children:" Recent Gists"}),H.map((function(e){return Object(d.jsxs)("div",{className:"card mb-3",children:[Object(d.jsxs)("div",{className:"p-2",children:[Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"card-name",to:"/user/".concat(e.username),children:[Object(d.jsx)("img",{className:"image ",src:e.photo,alt:""})," ",e.username]})," ",Object(d.jsxs)("span",{className:"status",children:[B.includes(e.username)?Object(d.jsx)("i",{className:"fa fa-circle text-success circle"}):Object(d.jsx)("i",{className:"fa fa-circle circle2"})," ",F&&F.admin?"Admin":"Member"]})]}),Object(d.jsx)("i",{className:"fa fa-clock-o"})," ",y()(e.createdAt).fromNow(),Object(d.jsx)(r.b,{className:"",to:"/feature/".concat(e.slug),children:Object(d.jsxs)("h5",{className:"mt-1 feature_title",children:[e.title," "]})}),Object(d.jsxs)("p",{className:"card-text",children:[e.description.substring(0,60),"..."]})]}),Object(d.jsx)("img",{className:"img-card-top",src:e.image,alt:""}),Object(d.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(d.jsxs)("div",{className:"d-flex justify-content-even p-2",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-eye"})," ",e.viewedBy.length," views"," "]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-comment"})," ",e.comments.length," comments"," "]})]}),Object(d.jsx)("div",{className:"d-flex justify-content-even p-2",children:Object(d.jsxs)(r.b,{className:"",to:"/report/feature/".concat(e.title),children:["report ",Object(d.jsx)("i",{className:"fa fa-angle-double-right"})]})})]}),Object(d.jsx)("div",{className:"card-footer",children:Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"add-comment",to:"/feature/".concat(e.slug),children:[Object(d.jsx)("img",{className:"image ",src:F?F.photo:"",alt:""})," ","Add a comment"]})]})})]},e._id)}))]}),Object(d.jsxs)("div",{className:"col-md-4",children:[Object(d.jsx)("h5",{className:"text-center",children:"Members Online"}),Object(d.jsx)("div",{className:"container members",children:L.length>0?L.map((function(e){return Object(d.jsxs)("div",{className:" border-bottom",children:[Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"members-link",to:"/user/".concat(e.loginUsername),children:[Object(d.jsx)("img",{className:"images  img-thumbnail d-block mx-auto",src:e.photo,alt:" Profile"})," "]})]}),Object(d.jsx)("p",{className:"text-center",children:Object(d.jsxs)(r.b,{className:"members-link",to:"/user/".concat(e.loginUsername),children:[" ",e.loginUsername," ",Object(d.jsx)("span",{className:"text-success",children:"/online"})]})})]},e._id)})):" "})]})]})]})]}),Object(d.jsx)(v,{})]})};var D=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),o=Object(j.a)(n,2),l=o[0],m=o[1],b=Object(c.useState)(""),h=Object(j.a)(b,2),x=h[0],f=h[1],g=Object(c.useState)(!1),O=Object(j.a)(g,2),p=O[0],N=O[1],v=localStorage.getItem("online"),w=JSON.parse(v),y=function(e){if(e.target.files[0].length>1){return i.b.error("Only 1 images can be uploaded at a time"),e.target.value=null,console.log("Only 1 images can be uploaded at a time"),!1}return!0},S=function(e){var t=e.target.files[0],s="";return["image/png","image/jpg","image/jpeg"].every((function(e){return t.type!==e}))&&(s+=t.type+" is not a supported format\n",i.b.error(t.type+" is not a supported format\n")),""===s||(e.target.value=null,console.log(s),!1)},k=function(e){var t=e.target.files[0],s="";return t.size>1e6&&(s+=t.type+"is too large, please pick a smaller file\n",i.b.error("Image is too large, please pick a smaller file")),""===s||(e.target.value=null,console.log(s),!1)};return Object(d.jsxs)("div",{className:"container-fluid login",children:[Object(d.jsx)("h5",{className:"pt-4 text-center text-white ",children:"Discussion"}),Object(d.jsx)("p",{className:"text-center text-white",children:" Create Post"}),p?Object(d.jsx)("p",{className:"text-center text-white",children:" Posting... "}):" ",Object(d.jsxs)("form",{className:"login-form col-lg-6 mx-lg-auto mt-5",onSubmit:function(e){e.preventDefault(),N(!0);var t=w.username,c=w.photo,n=new FormData;if(n.append("image",x),console.log(x),n.append("title",l),n.append("description",s),n.append("username",t),n.append("photo",c),x&&l&&s)return u.a.post("/api/feature/new",n).then((function(e){console.log(e.data),m(""),a(""),f(""),N(!1),i.b.success("Posted"),setTimeout((function(){window.location.href="/"}),2e3)})).catch((function(e){console.log(e.response),i.b.error("An error occur, try again"),N(!1)})),!0;return console.log("You can not submit empty form"),i.b.error("You can not submit empty form"),!1},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"text-white",children:"Title"}),Object(d.jsx)("input",{className:"form-control login-control",type:"text",placeholder:"enter title",value:l,onChange:function(e){var t=e.target.value;console.log(t),m(t)}})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Add Image"}),Object(d.jsx)("input",{className:"form-control login-control",type:"file",defaultValue:x,onChange:function(e){if(y(e)&&k(e)&&S(e)){var t=e.target.files[0];f(t),console.log(t)}}})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Description"}),Object(d.jsx)("textarea",{className:"form-control",placeholder:"description...",value:s,onChange:function(e){var t=e.target.value;console.log(t),a(t)}})]}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn login-btn",type:"submit",children:"Create Post"})})]}),Object(d.jsxs)("div",{className:"d-flex justify-content-between my-2 col-lg-6 mx-lg-auto",children:[Object(d.jsx)(r.b,{className:" text-white login-link",to:"/",children:"Home"}),Object(d.jsx)(r.b,{className:" text-white login-link ",to:"/user/".concat(w.username),children:"Profile"})]})]})};y.a.extend(k.a);var A=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(!0),o=Object(j.a)(n,2),l=o[0],m=o[1],b=localStorage.getItem("online"),h=JSON.parse(b);Object(c.useEffect)((function(){u.a.get("/api/features/search").then((function(e){console.log(e.data),m(!1),a(e.data.filter((function(e){return e.username===h.username})))})).catch((function(e){console.log(e.response),m(!1)}))}),[h.username]);var x=Array.from(s);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsxs)("div",{className:"container col-md-4 my-4",children:[Object(d.jsx)("h5",{className:"text-center",children:"My Posts"}),l?Object(d.jsx)("h5",{className:"text-center",children:"Loading...."}):" ",x.length>0?x.map((function(e){return Object(d.jsxs)("div",{className:"card mb-3",children:[Object(d.jsxs)("div",{className:"p-2",children:[Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"card-name",to:"/user/".concat(e.username),children:[Object(d.jsx)("img",{className:"image ",src:e.photo,alt:""})," ",e.username]})," ",Object(d.jsxs)("span",{className:"status",children:[" . ",h&&h.admin?"Admin":"Member"]})]}),Object(d.jsxs)("strong",{children:[" ",Object(d.jsx)("i",{className:"fa fa-clock-o"})," ",y()(e.createdAt).fromNow()]}),Object(d.jsx)(r.b,{className:"",to:"/feature/".concat(e.slug),children:Object(d.jsxs)("h5",{className:"mt-1 feature_title",children:[e.title," "]})}),Object(d.jsxs)("p",{className:"card-text",children:[e.description.substring(0,60),"..."]})]}),Object(d.jsx)("img",{className:"img-card-top",src:e.image,alt:""}),Object(d.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(d.jsxs)("div",{className:"d-flex justify-content-even p-2",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-eye"})," ",e.viewedBy.length," views "]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-comment"})," ",e.comments.length," comments "]})]}),Object(d.jsxs)("div",{className:"d-flex justify-content-even p-2",children:[Object(d.jsx)("p",{children:Object(d.jsx)("i",{className:"fa fa-pencil"})}),Object(d.jsx)(r.b,{className:"",to:"/edit/feature/".concat(e.slug),children:"edit /"}),Object(d.jsx)(r.b,{className:"text-danger",to:"#",onClick:function(){var t;t=e.slug,console.log(t),u.a.delete("/api/delete/feature/"+t).then((function(e){console.log(e.data),a({data:s.filter((function(e){return e.slug!==t}))}),i.b.success("Deleted"),setTimeout((function(){window.location.href="/"}),1e3)})).catch((function(e){console.log(e.response),i.b.error("An error occur, try again")}))},children:" delete"}),Object(d.jsx)("p",{children:Object(d.jsx)("i",{className:"fa fa-trash ml-2"})})]})]}),Object(d.jsx)("div",{className:"card-footer",children:Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"add-comment",to:"/feature/".concat(e.slug),children:[Object(d.jsx)("img",{className:"image ",src:h?h.photo:"",alt:""})," Add a comment"]})]})})]},e._id)})):Object(d.jsx)("p",{className:"text-center",children:"No post yet"})]}),Object(d.jsx)(v,{})]})},T=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1];return Object(d.jsx)("form",{className:"my-2 home-form d-none d-lg-inline",onSubmit:function(e){e.preventDefault(),console.log(e),window.location.href="/search/query=".concat(s)},children:Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("input",{type:"search",className:"form-control lg-search shadow-none",placeholder:"Search...",value:s,onChange:function(e){a(e.target.value)}}),Object(d.jsx)("div",{className:"input-group-append",children:Object(d.jsx)("button",{className:"btn search-btn",children:Object(d.jsx)("i",{className:"fa fa-search"})})})]})})};y.a.extend(k.a);var Y=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),o=Object(j.a)(n,2),m=o[0],b=o[1],h=Object(c.useState)(""),x=Object(j.a)(h,2),f=x[0],g=x[1],O=Object(c.useState)(!1),p=Object(j.a)(O,2),w=p[0],S=p[1],k=Object(c.useState)(""),P=Object(j.a)(k,2),C=P[0],D=P[1],A=Object(c.useState)(!1),Y=Object(j.a)(A,2),I=Y[0],U=Y[1],M=Object(c.useState)(""),E=Object(j.a)(M,2),F=E[0],L=E[1],_=Object(c.useState)(""),H=Object(j.a)(_,2),J=H[0],B=H[1],R=Object(c.useState)(""),V=Object(j.a)(R,2),q=V[0],W=V[1],z=Object(c.useState)(""),G=Object(j.a)(z,2),K=G[0],Q=G[1],X=Object(c.useState)(""),Z=Object(j.a)(X,2),$=Z[0],ee=Z[1],te=Object(l.g)().slug;console.log(te);var se=localStorage.getItem("online"),ce=JSON.parse(se);Object(c.useEffect)((function(){u.a.get("/api/feature/"+te).then((function(e){console.log(e.data),a(e.data.title),b(e.data.description),g(e.data.image),B(e.data.createdAt),W(e.data.username),Q(e.data.photo),S(!0)})).catch((function(e){console.log(e.response)}));var e={username:ce.username};u.a.post("/api/feature/views/"+te,e).then((function(e){console.log(e.data)})).catch((function(e){console.log(e.response)})),u.a.get("/api/comments/feature/"+te).then((function(e){console.log(e.data),L(e.data.comments)})).catch((function(e){console.log(e.response)})),u.a.get("/api/show/features/recent/"+te).then((function(e){console.log(e.data),ee(e.data)})).catch((function(e){console.log(e.response)})),console.log(s)}),[ce.username,te,s]);var ae=Array.from(F),ne=Array.from($);return document.title="Discussion | ".concat(te),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsxs)("div",{class:"container-fluid",children:[Object(d.jsx)("div",{className:"container profile my-4",children:Object(d.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(d.jsx)("div",{className:"",children:Object(d.jsx)("img",{className:"image ",src:ce.photo,alt:""})}),Object(d.jsx)("p",{className:"para",children:"Tell others what is happening"}),Object(d.jsx)(T,{})]})}),w?"":Object(d.jsx)("h5",{className:"loader text-center",children:"Loading ... "}),Object(d.jsx)("div",{className:" col-md-6 show-header mx-auto mt-5",children:Object(d.jsxs)("h5",{className:"feature_title",children:[s," ",Object(d.jsxs)("span",{className:"",children:[" by ",Object(d.jsxs)(r.b,{className:"",to:"/user/".concat(q),children:[Object(d.jsxs)("span",{className:"show-name",children:["  ",q]})," ",Object(d.jsx)("img",{className:"image img-thumbnail",src:K,alt:"profile"})," "]})," Posted ",y()(J).format("DD/MM/YYYY")]})]})}),Object(d.jsxs)("div",{className:"col-md-6 show-page mb-5 d-block mx-auto",children:[Object(d.jsx)("p",{children:m}),Object(d.jsx)("img",{className:"img-fluid d-block mx-auto my-3",src:f,alt:""}),Object(d.jsxs)("form",{className:"my-3 p-2",onSubmit:function(e){e.preventDefault(),U(!0);var t={commentUser:ce.username,commentPhoto:ce.photo,commentBody:C};if(C)return u.a.post("/api/comment/feature/"+te,t).then((function(e){console.log(e.data.comments),U(!1),D(""),i.b.success("Comment posted"),L(e.data.comments)})).catch((function(e){console.log(e.response),U(!1)})),!0;return console.log("You can not submit an empty form"),i.b.error("You can not submit an empty form"),!1},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Leave a Reply "}),Object(d.jsx)("textarea",{className:"form-control",rows:"5",placeholder:"comment...",value:C,onChange:function(e){var t=e.target.value;D(t)}})]}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn btn-show bg-white",type:"submit",children:"Post Comment"})})]}),Object(d.jsxs)("div",{className:"container mt-4",children:[I?Object(d.jsx)("p",{className:"text-center text-white",children:"Posting comment..."}):" ",ae.length>0?Object(d.jsx)("h5",{className:"mb-3",children:"All Comments "}):"No comment posted yet",ae.map((function(e){return Object(d.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(d.jsx)("div",{className:"flex-shrink-0",children:Object(d.jsxs)(r.b,{className:"",to:"/user/".concat(e.commentUser),children:[" ",Object(d.jsx)("img",{className:"mr-3 img-thumbnail",src:e.commentPhoto,alt:"",style:{height:"64px",width:"64px"}})]})}),Object(d.jsxs)("div",{className:"flex-grow-1 ms-3",children:[Object(d.jsx)(r.b,{className:"",to:"/user/".concat(e.commentUser),children:Object(d.jsx)("h5",{className:"",children:e.commentUser})}),Object(d.jsx)("p",{children:e.commentBody})]})]},e._id)}))]})]}),Object(d.jsx)("div",{className:"container my-4",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-md-6 mx-auto",children:[Object(d.jsx)("h5",{className:"text-center",children:"Recent Gists "}),ne.length>0?ne.map((function(e){return Object(d.jsxs)("div",{className:"card mb-3",children:[Object(d.jsxs)("div",{className:"p-2",children:[Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"card-name",to:"/user/".concat(e.username),children:[Object(d.jsx)("img",{className:"image ",src:e.photo,alt:""})," ",e.username]})," ",Object(d.jsxs)("span",{className:"status",children:[" . ",ce&&ce.admin?"Admin":"Member"]})]}),Object(d.jsx)("i",{className:"fa fa-clock-o"})," ",y()(e.createdAt).fromNow(),Object(d.jsx)(r.b,{className:"",to:"/feature/".concat(e.slug),children:Object(d.jsxs)("h5",{className:"mt-1 feature_title",children:[e.title," "]})}),Object(d.jsxs)("p",{className:"card-text",children:[e.description.substring(0,60),"..."]})]}),Object(d.jsx)("img",{className:"img-card-top",src:e.image,alt:""}),Object(d.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(d.jsxs)("div",{className:"d-flex justify-content-even p-2",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-eye"})," ",e.viewedBy.length," views "]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-comment"})," ",e.comments.length," comments "]})]}),Object(d.jsx)("div",{className:"d-flex justify-content-even p-2",children:Object(d.jsxs)(r.b,{className:"",to:"/report/feature/".concat(e.title),children:["report ",Object(d.jsx)("i",{className:"fa fa-angle-double-right"})]})})]}),Object(d.jsx)("div",{className:"card-footer",children:Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"add-comment",to:"/feature/".concat(e.slug),children:[Object(d.jsx)("img",{className:"image ",src:ce?ce.photo:"",alt:""})," Add a comment"]})]})})]},e._id)})):""]})})})]}),Object(d.jsx)(v,{})]})};y.a.extend(k.a);var I=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(!1),o=Object(j.a)(n,2),m=o[0],b=o[1],h=Object(l.g)().query,x=Object(c.useState)(!1),f=Object(j.a)(x,2),g=f[0],O=f[1];Object(c.useEffect)((function(){console.log(h),O(!0),u.a.get("/api/features/search").then((function(e){console.log(e.data);var t=e.data.filter((function(e){return e.title.toLowerCase().includes(h)||e.title.toUpperCase().includes(h.toUpperCase())}));t.length>0?(a(t),b(!0),O(!1),i.b.success("Search results for ".concat(h," found"))):(b(!1),i.b.info("Search results for ".concat(h," not found")),O(!1))})).catch((function(e){console.log(e.response)}))}),[h]);var p=localStorage.getItem("online"),w=JSON.parse(p),S=Array.from(s);return console.log(S),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),m?Object(d.jsxs)("div",{className:"container col-md-4 my-4",children:[Object(d.jsxs)("h5",{className:"text-center my-3",children:["Search results for ",h," found"]}),g?Object(d.jsx)("h5",{className:"text-center my-3",children:"Loading..."}):"",S.map((function(e){return Object(d.jsxs)("div",{className:"card mb-3",children:[Object(d.jsxs)("div",{className:"p-2",children:[Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"card-name",to:"/user/".concat(e.username),children:[Object(d.jsx)("img",{className:"image ",src:e.photo,alt:""})," ",e.username]})," ",Object(d.jsxs)("span",{className:"status",children:[" . ",w&&w.admin?"Admin":"Member"]})]}),Object(d.jsxs)("strong",{children:[" ",Object(d.jsx)("i",{className:"fa fa-clock-o"})," ",y()(e.createdAt).fromNow()]}),Object(d.jsx)(r.b,{className:"",to:"/feature/".concat(e.slug),children:Object(d.jsxs)("h5",{className:"mt-1 feature_title",children:[e.title," "]})}),Object(d.jsxs)("p",{className:"card-text",children:[e.description.substring(0,60),"..."]})]}),Object(d.jsx)("img",{className:"img-card-top",src:e.image,alt:""}),Object(d.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(d.jsxs)("div",{className:"d-flex justify-content-even p-2",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-eye"})," ",e.viewedBy.length," views "]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("i",{className:"fa fa-comment"})," ",e.comments.length," comments "]})]}),Object(d.jsx)("div",{className:"d-flex justify-content-even p-2",children:Object(d.jsxs)(r.b,{className:"",to:"/report/feature/".concat(e.title),children:["report ",Object(d.jsx)("i",{className:"fa fa-angle-double-right"})]})})]}),Object(d.jsx)("div",{className:"card-footer",children:Object(d.jsxs)("span",{className:" p-2",children:[" ",Object(d.jsxs)(r.b,{className:"add-comment",to:"/feature/".concat(e.slug),children:[Object(d.jsx)("img",{className:"image ",src:w?w.photo:"",alt:""})," Add a comment"]})]})})]},e._id)}))]}):Object(d.jsxs)("h5",{className:"text-center my-3",children:["Search results for ",h," not found"]}),Object(d.jsx)(v,{})]})};var U=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(""),o=Object(j.a)(n,2),m=o[0],b=o[1],h=Object(c.useState)(""),x=Object(j.a)(h,2),f=x[0],g=x[1],O=Object(c.useState)(!1),p=Object(j.a)(O,2),N=p[0],v=p[1],w=Object(c.useState)(""),y=Object(j.a)(w,2),S=y[0],k=y[1],P=Object(l.g)().slug;console.log(P);var C=function(e){if(e.target.files[0].length>1){return i.b.error("Only 1 images can be uploaded at a time"),e.target.value=null,console.log("Only 1 images can be uploaded at a time"),!1}return!0},D=function(e){var t=e.target.files[0],s="";return["image/png","image/jpg","image/jpeg"].every((function(e){return t.type!==e}))&&(s+=t.type+" is not a supported format\n",i.b.error(t.type+" is not a supported format\n")),""===s||(e.target.value=null,console.log(s),!1)},A=function(e){var t=e.target.files[0],s="";return t.size>1e6&&(s+=t.type+"is too large, please pick a smaller file\n",i.b.error("Image is too large, please pick a smaller file")),""===s||(e.target.value=null,console.log(s),!1)};return Object(c.useEffect)((function(){u.a.get("/api/edit/feature/"+P).then((function(e){console.log(e.data),a(e.data.title),b(e.data.description),g(e.data.image),v(!0)})).catch((function(e){console.log(e.response)}))}),[P]),Object(d.jsxs)("div",{className:"container-fluid login",children:[Object(d.jsx)("h5",{className:"pt-4 text-center text-white ",children:"Discussion"}),Object(d.jsx)("p",{className:"text-center text-white",children:" Update Post"}),N?"":Object(d.jsx)("h5",{className:"loader text-center",children:"Loading ... "}),Object(d.jsxs)("form",{className:"login-form col-lg-6 mx-lg-auto mt-5",onSubmit:function(e){e.preventDefault();var t=new FormData;if(t.append("image",S),console.log(S),t.append("title",s),t.append("description",m),s&&m)return u.a.put("/api/update/feature/"+P,t).then((function(e){console.log(e.data),i.b.success("Updated"),setTimeout((function(){window.location.href="/user/features"}),2e3)})).catch((function(e){console.log(e.response),i.b.error("An error occur, try again")})),!0;return console.log("You can not submit empty form"),i.b.error("You can not submit empty form"),!1},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{className:"text-white",children:"Title"}),Object(d.jsx)("input",{className:"form-control login-control",type:"text",placeholder:"enter email",value:s,onChange:function(e){a(e.target.value)}})]}),Object(d.jsx)("img",{className:"img-thumbnail my-3 d-block mx-auto",style:{width:"150px",height:"150px"},src:f,alt:" "}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Change Image"}),Object(d.jsx)("input",{className:"form-control login-control",type:"file",defaultValue:S,onChange:function(e){if(C(e)&&A(e)&&D(e)){var t=e.target.files[0];k(t),console.log(t)}}})]}),Object(d.jsxs)("div",{className:"form-group mt-3",children:[Object(d.jsx)("label",{className:"text-white",children:"Description"}),Object(d.jsx)("textarea",{className:"form-control",placeholder:"description...",value:m,onChange:function(e){b(e.target.value)}})]}),Object(d.jsx)("div",{className:"form-group mt-3",children:Object(d.jsx)("button",{className:"btn login-btn",children:"Update Post"})})]}),Object(d.jsxs)("div",{className:"d-flex justify-content-between my-2 col-lg-6 mx-lg-auto",children:[Object(d.jsx)(r.b,{className:" text-white login-link",to:"/",children:"Home"}),Object(d.jsx)(r.b,{className:" text-white login-link ",to:"/",children:"Profile"})]})]})};var M=function(){return Object(d.jsxs)("div",{className:"container my-5",children:[Object(d.jsx)("h1",{className:"",children:"404"}),Object(d.jsx)("h5",{className:"",children:"Oops! This Page Could Not Be Found"}),Object(d.jsx)("p",{children:"Sorry the page you are looking for does not exist or have been removed, name changed or is temporary unavailable."}),Object(d.jsx)(r.b,{to:"/",children:Object(d.jsx)("h5",{className:"",children:"Back To Home"})})]})},E=function(){var e=localStorage.getItem("online"),t=JSON.parse(e);return Object(c.useEffect)((function(){var e={loginUsername:t.username,photo:t.photo};u.a.post("/api/online-users",e).then((function(e){console.log(e.data)})).catch((function(e){console.log(e.response)})),setTimeout((function(){window.location.href="/"}),3e3)}),[t.username,t.photo]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h5",{className:"text-center mt-4",children:"Please wait...."}),Object(d.jsx)("p",{className:"text-center",children:"Verifying user info"})]})},F=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(!1),o=Object(j.a)(n,2),m=o[0],b=o[1],h=localStorage.getItem("online"),x=JSON.parse(h),f=Object(l.g)().title;Object(c.useEffect)((function(){a(f)}),[f]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(N,{}),Object(d.jsxs)("div",{className:"container col-sm-6 my-4",children:[m?Object(d.jsx)("p",{className:"text-center",children:"Sending report..."}):" ",Object(d.jsxs)("form",{className:" mx-auto",onSubmit:function(e){e.preventDefault(),b(!0);var t={report:s,reporter_name:x.username,reporter_email:x.email};console.log(t),u.a.post("/api/feature/report",t).then((function(e){console.log(e.data),b(!1),i.b.success("Post reported. Thanks"),setTimeout((function(){window.location.href="/"}),2e3)})).catch((function(e){console.log(e.response),b(!1),i.b.error("An error occur, try again")}))},children:[Object(d.jsx)("label",{children:"Post Title"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{className:"form-control",type:"text",onChange:function(e){a(e.target.value)},value:s,onMouseDown:function(e){e.preventDefault()}})}),Object(d.jsx)("h5",{className:"text-center mt-3",children:"Are sure you want to report this post ?"}),Object(d.jsxs)("div",{className:"form-group d-flex justify-content-around",children:[Object(d.jsx)(r.b,{className:"btn mt-3 report-btn",to:"/",children:"Cancel"}),Object(d.jsx)("button",{className:"btn  mt-3 report-btn ",type:"submit",children:"Report Post"})]})]})]})]})};var L=function(){var e=localStorage.getItem("userId");return Object(d.jsxs)("div",{children:[Object(d.jsx)(r.a,{children:Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{exact:!0,path:"/",element:Object(d.jsxs)(d.Fragment,{children:[" ",e?Object(d.jsx)(C,{}):Object(d.jsx)(b,{})]})}),Object(d.jsx)(l.a,{path:"user/login",element:Object(d.jsx)(b,{})}),Object(d.jsx)(l.a,{path:"/user/register",element:Object(d.jsx)(h,{})}),Object(d.jsx)(l.a,{path:"/user/forgot-password",element:Object(d.jsx)(x,{})}),Object(d.jsx)(l.a,{path:"/user/verify-email",element:Object(d.jsx)(f,{})}),Object(d.jsx)(l.a,{path:"/user/reset-password/:id",element:Object(d.jsx)(O,{})}),Object(d.jsx)(l.a,{path:"/user/reset-code",element:Object(d.jsx)(g,{})}),Object(d.jsx)(l.a,{path:"/user/edit/:username",element:Object(d.jsx)(d.Fragment,{children:e?Object(d.jsx)(p,{}):Object(d.jsx)(b,{})})}),Object(d.jsx)(l.a,{path:"/user/:username",element:Object(d.jsx)(d.Fragment,{children:e?Object(d.jsx)(P,{}):Object(d.jsx)(b,{})})}),Object(d.jsx)(l.a,{path:"/feature/new",element:Object(d.jsx)(d.Fragment,{children:e?Object(d.jsx)(D,{}):Object(d.jsx)(b,{})})}),Object(d.jsx)(l.a,{path:"/user/features",element:Object(d.jsx)(d.Fragment,{children:e?Object(d.jsx)(A,{}):Object(d.jsx)(b,{})})}),Object(d.jsx)(l.a,{path:"/feature/:slug",element:Object(d.jsx)(Y,{})}),Object(d.jsx)(l.a,{path:"/search/query=:query",element:Object(d.jsx)(d.Fragment,{children:e?Object(d.jsx)(I,{}):Object(d.jsx)(b,{})})}),Object(d.jsx)(l.a,{path:"/edit/feature/:slug",element:Object(d.jsx)(d.Fragment,{children:e?Object(d.jsx)(U,{}):Object(d.jsx)(b,{})})}),Object(d.jsx)(l.a,{path:"/user/security-check",element:Object(d.jsx)(d.Fragment,{children:e?Object(d.jsx)(E,{}):Object(d.jsx)(b,{})})}),Object(d.jsx)(l.a,{path:"/report/feature/:title",element:Object(d.jsx)(d.Fragment,{children:e?Object(d.jsx)(F,{}):Object(d.jsx)(b,{})})}),Object(d.jsx)(l.a,{path:"*",element:Object(d.jsx)(M,{})})]})}),Object(d.jsx)(i.a,{className:"text-center",position:"top-center"})]})};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.6fcdfeeb.chunk.js.map